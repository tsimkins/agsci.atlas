<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
        xmlns:tal="http://xml.zope.org/namespaces/tal"
        xmlns:metal="http://xml.zope.org/namespaces/metal"
        xmlns:i18n="http://xml.zope.org/namespaces/i18n"
        lang="en"
        metal:use-macro="context/main_template/macros/master"
        i18n:domain="plone">
    
    <body>
    
        <metal:title fill-slot="content-description">
    
            <p class="documentDescription"
                tal:content="view/title" />
    
        </metal:title>
    
        <metal:styleslot fill-slot="style_slot">
            <style type="text/css">
    
                #content-core ul {
                    list-style-type: none;
                }
    
                #content-core > ul {
                    margin-left: 1em;
                }
    
                .managePortletsAboveLink {
                    display: none;
                }
    
            </style>
        </metal:styleslot>
    
        <metal:content-core
            metal:fill-slot="content-core"
            tal:define="folderContents view/getResults;
                        user_id view/getUserId|nothing;">


            <metal:sub-navigation metal:define-macro="sub-navigation">    
            
            <div class="atlas-controls">

                <metal:sub-navigation-base metal:define-macro="sub-navigation-base">    
    
                    <h2 class="atlas-queue">By Status</h2>
        
                    <div class="atlas-review-nav">
                        <ul>
                            <li tal:repeat="i view/navigation_items">
                                <a
                                    tal:attributes="href python:i[0];
                                                    class python: i[2] and 'selected' or ''"
                                    tal:content="python: i[1]" />
                            </li>
                        </ul>
                        <div class="visualClear"><!-- --></div>
                    </div>

                </metal:sub-navigation-base>    
                
                <metal:filter-owner define-slot="filter-owner">
    
                    <form method="POST"
                        class="atlas-filter"
                        tal:attributes="action view/getPOSTURL">
        
                        <h2 class="atlas-queue">Filter By Owner</h2>
    
                        <tal:no-owner tal:condition="not: view/getUserId">
                            <label for="user_id">Owner</label>
            
                            <select name="user_id" id="user_id">
                                <option value="">Select an owner to filter by...</option>
                                <option
                                    tal:repeat="i view/getOwners"
                                    tal:content="python: view.getUserName(i)"
                                    tal:attributes="value i;
                                                    selected python:(view.getUserId() == i) and 'selected' or ''"
                                    >
                                </option>
                            </select>
            
                            <input type="submit" value="Filter" />
                        </tal:no-owner>
                        
                        <tal:owner tal:condition="view/getUserId">
                            <p>Filtered by <strong tal:content="python: view.getUserName(view.getUserId())" /></p>
                            <input type="submit" value="Unfilter" />
                        </tal:owner>
    
                    </form>
                
                </metal:filter-owner>
    
            </div>
            
            </metal:sub-navigation>    
    
            <tal:results 
                tal:condition="folderContents"
                metal:define-macro="product-results">

                <metal:product-listing use-macro="context/@@view/macros/product-listing" />
            
            </tal:results>
    
            <p class="discreet"
               tal:condition="not:folderContents">
                No results.
            </p>
    
        </metal:content-core>
    
    </body>

</html>
